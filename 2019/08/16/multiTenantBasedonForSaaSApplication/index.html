<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>SAAS下的多租户研究 | 知识涓流</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="设计,技术">
    <meta name="description" content="SAAS下的多租户研究">
<meta name="keywords" content="设计,技术">
<meta property="og:type" content="article">
<meta property="og:title" content="SAAS下的多租户研究">
<meta property="og:url" content="http://www.xmidou.com/2019/08/16/multiTenantBasedonForSaaSApplication/index.html">
<meta property="og:site_name" content="知识涓流">
<meta property="og:description" content="SAAS下的多租户研究">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-08-16T14:22:56.459Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SAAS下的多租户研究">
<meta name="twitter:description" content="SAAS下的多租户研究">
    
        <link rel="alternate" type="application/atom+xml" title="知识涓流" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">泡菜</h5>
          <a href="mailto:buye110@hotmail.com" title="buye110@hotmail.com" class="mail">buye110@hotmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/">
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags">
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">SAAS下的多租户研究</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">SAAS下的多租户研究</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-08-16T06:20:34.000Z" itemprop="datePublished" class="page-time">
  2019-08-16
</time>


            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#摘要"><span class="post-toc-number">1.</span> <span class="post-toc-text">摘要</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#引言"><span class="post-toc-number">2.</span> <span class="post-toc-text">引言</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#2基于键值对模式的多租户索引模型"><span class="post-toc-number">3.</span> <span class="post-toc-text">2基于键值对模式的多租户索引模型</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-1-键值对模式介绍"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">2.1:键值对模式介绍</span></a></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-multiTenantBasedonForSaaSApplication" class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">SAAS下的多租户研究</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-08-16 14:20:34" datetime="2019-08-16T06:20:34.000Z" itemprop="datePublished">2019-08-16</time>

            


            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style="display:none">
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>面向SAAS应用的多租户数据为满足租户的数据隔离和按需定制的需求，需要提供支持隔离和易于定制的数据存储机制及索引机制。基于键值对存储方式，提出元数据驱动的映射表索引模型，该模型根据租户定制需求，为租户业务数据形成各自索引元数据，通过元数据驱动实现了索引数据的隔离及定制效果；给出索引的维护策略，根据租户数据访问请求进行索引切片，以逐渐细化的索引切片作为数据访问的基本单位，快速返回租户结果集，实验结果表明，该方案在数据访问分布均衡的情况下，使索引维护及数据访问且有较好的总体发到性能。</p>
<h1 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h1><p>在面向SAAS的应用中，多租户数据库需要提供租户之间的数据隔离及按需制定功能，同时，还要在性能上让用户有比较好的体验，这对数据的存储和索引机制提出了挑战。多租户数据突破了传统的关系数据库、对象数据库的定义，也不同于HBASE这样面向非结构化数据搜索工作的分布式数据库系统。</p>
<p>多租户数据库存储已经成为热点，但是索引方面的研究还比较少，目前只有SALESFORCE给出了稀疏表模式下的数据透视表索引以及云数据管理基于HBASE存储的多维索引等。稀疏表方式在支持租户定制方面受DBMSr限制。而HBASE存储主要面向非结构化数据处理。本文的研究背景为CRM、HR等系统，以结构化数据为主。综合国内外研究成果，本文采取了键值对模式的存储方式，该存储方式能完美地支持租户定制及数据隔离，并且非常适合于描述结构化数据，面对成千上万的租户，如何实现索引的定制及索引数据的隔离存储都成了需要解决的问题。</p>
<p>在现阶段，面向SAAS应用的多租户数据管理已经成为国同外研究的热点。针对数据安全性、数据可扩展性等方面提出并分析了一些设计模式；提出了SAAS应用的体系架构，然后提出了基于SAAS模式的企业公共服务平台的３个紧密相连的模型－多用户数据模型、元数据管理模型和安全服务模型；探讨了数据仓库应用在云数据中改进索引模式以减少无效处理时间，提高命中率；探讨了多租户数据层如何支持多租户服务计算；提出了折叠表方式，并对各种数据管理方式得出了较详细的性能数据文献；采用了预定义字段机制支持扩展，在查询方面提出了元数据驱动、外部搜索引擎、次优搜索机制等理念；提出了如何使用XML来支持数据定制及驱动ECA模型；更是在2009年的SIGMOD上讨论了目前主要的集中多租户数据管理方式，包括稀疏表、扩展表、XML、键值对等。该文献经过全面地言语和分析后认为，理想的多租户数据库尚未出现，还有很多的问题需要研究，本文主要探讨了索引方面的关键技术 。</p>
<p>传统的索引方式，在多租户数据库模式 下，可以执照 objectID、columnNAME及value建立复合索引，针对key_search这种模式，可以迅速定位到某些属性，并且重组成一个元组；对于key_search的范围查询，通过key定位到某个元组，它需要大量的连接才能返回结果集，存在性能问题；对于复合索引里边的次关键字的查询，如果想快速查询，就必须再次创建复合索引，但存储空间巨大 ，否则查询性能严重不足。</p>
<p>Column_store是面向数据仓库的，基本上是以读为主的应用。数据仓库有着特殊的背景，它由维度和事实构成，维度通常数量有限，维度的组合虽然多，但是最终形成的方体为稀疏型的。在这种前提下,monetDB数据库中提出了cracking的策略，在查询的时候建立查询列的副本，并按照avl树的思想基于每次查询动态调整元组顺序，这是查询驱动的思想，对于事务处理为主的多租户应用，每次更新都要及时地反应出来，这种查询驱动的方式存在着明显的缺陷。本文更多地关注了数据库更新时的索引维护策略。</p>
<p>HBASE是一个类似Bigtable的分布式数据库，大部分特性和Bigtable一样，是一个稀疏的、长期存储的、多维度的、排序的映射表，这张表的索引是行关键字、列关键字和时间戳。第个值是一个不解释的字符数组，数据都是字符串，不支持数据类型。同一个关系里面的每一行数据都有可以有截然不同的属性，为动态定制属性提供了一种手段。HABSE存在的问题有两点，首先HABSE不是多租户的，没有提供隔离机制；其次，HABSE面向的是非结构化数据，每个值是一个不解释的字符数组，擅长于关键字搜索，它不可能提供基于某个属性组的索引，而结构化数据事务处理需要确切的解释每个属性的信义并对其进行维护。本文更多地底座了结构化数据的索引机制。</p>
<p>稀疏表方式建立了数据透视表作为索引，比较有代表性的Saleforce就是采取了这种方式。这种索引方式解决了索引列数据对象同擀的问题，但是他并没有深入探讨透视表和稀疏表的数据同步问题，也无法解决透视表数量暴涨的问题。</p>
<p>本文基于键值对存储模式，分析了现有索引的局限性，结合稀疏表模式下数据透视表的思想，引入了数据映射表索引机制及切片策略，提出了一种用于多租户数据库的面向结构化数据的映射表索引结构及索引维护tglt.yynwfpxhxfsqce有效地支持多租户定制及隔离特征，并能提供较好 的访问性能。</p>
<p>本文第2节给出键值对传统索引机制在SAAS应用的问题分析，介绍基于键值对模式的多租户映射表视频信号萨嘎；第3节讨论索引更新策略；第4节给出上述算法的实验验证；第5节给出数大安慰她；第6节给出本文的结义与展望。</p>
<h1 id="2基于键值对模式的多租户索引模型"><a href="#2基于键值对模式的多租户索引模型" class="headerlink" title="2基于键值对模式的多租户索引模型"></a>2基于键值对模式的多租户索引模型</h1><h2 id="2-1-键值对模式介绍"><a href="#2-1-键值对模式介绍" class="headerlink" title="2.1:键值对模式介绍"></a>2.1:键值对模式介绍</h2><p>在SAAS模式下，数据库不但要提供极高的性能，还要支持租户隔离而且富于扩展性。多租户数据库要根据环境的不同，比如不同的租户、不同的工作流程、不同的服务水平协议 等提供易变性。结合国内外研究现状，本文选择了键值对存储 方式来存储业务数据。</p>
<p>键值对言式能提供较好的易变性，在键值对方式下，每个属性都存储在一个长而窄的关系里（如图1）。</p>
<p>租户根据自己业务的需要，自由定制所需数据项，租户定制信息被保存在元数据（metadata）里，租户定制的数据项经过逻辑层与存储层模式映射后，被统一保存在数据关系里（data table）.对应于租户数据可以建立传统的索引（index）,如B+树，以方便数据存取。</p>
<p>图1 基于键值对模式的多租户数据库</p>
<p>如表1所示，租户从逻辑层看到的仍然是传统关系模式的表格，但是在实际的键值对存储模式里，基于元数据信息，该关系通过模式映射机制被透明地转换到datatable(表2)中。</p>
<p>表2存储层的关系datatable</p>
<p>在键值对存储下，可以为业务数据建立全局索引，如（tenantID,tableID,columnID,value）当存取单个属性时，根据索引能直接进行操作。</p>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2019-08-16T14:22:56.459Z" itemprop="dateUpdated">2019-08-16 22:22:56</time>
</span><br>


        
        作者：泡菜
        
    </div>
    
    <footer>
        <a href="http://www.xmidou.com">
            <img src="/img/avatar.jpg" alt="泡菜">
            泡菜
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/设计/">设计</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://www.xmidou.com/2019/08/16/multiTenantBasedonForSaaSApplication/&title=《SAAS下的多租户研究》 — 知识涓流&pic=http://www.xmidou.com/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://www.xmidou.com/2019/08/16/multiTenantBasedonForSaaSApplication/&title=《SAAS下的多租户研究》 — 知识涓流&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://www.xmidou.com/2019/08/16/multiTenantBasedonForSaaSApplication/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《SAAS下的多租户研究》 — 知识涓流&url=http://www.xmidou.com/2019/08/16/multiTenantBasedonForSaaSApplication/&via=http://www.xmidou.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://www.xmidou.com/2019/08/16/multiTenantBasedonForSaaSApplication/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2019/08/20/liunxFuse/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">用户空间文件系统 FUSE：架构和实现细节</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2019/08/14/distributedTransaction/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">分布式事务处理方式总结</h4>
      </a>
    </div>
  
</nav>



    




















</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        多谢支持~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.jpg" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/wechat.jpg" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    
	
	<div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style="display:none">
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style="display:none">
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>泡菜 &copy; 2015 - 2019</span>
			<span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/buye110" target="_blank">Pickled cabbage</a>
            </span>
			
        </p>
    </div>

	
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://www.xmidou.com/2019/08/16/multiTenantBasedonForSaaSApplication/&title=《SAAS下的多租户研究》 — 知识涓流&pic=http://www.xmidou.com/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://www.xmidou.com/2019/08/16/multiTenantBasedonForSaaSApplication/&title=《SAAS下的多租户研究》 — 知识涓流&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://www.xmidou.com/2019/08/16/multiTenantBasedonForSaaSApplication/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《SAAS下的多租户研究》 — 知识涓流&url=http://www.xmidou.com/2019/08/16/multiTenantBasedonForSaaSApplication/&via=http://www.xmidou.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://www.xmidou.com/2019/08/16/multiTenantBasedonForSaaSApplication/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACtklEQVR42u3cQY4iQQwEwPn/p3elPc2lIdOuGmal6BNC0CI4lE3a4usrvv78u74/fnrm+/NPr3+6/+YOqwsPDw9v9NGfridecrf865h9htevx8PDw7vNS4pBfpQn4OTQb79iPDw8vN/Gu8fIG3c8PDy8/4v3+l1tc5y3y3h4eHi/k7f/QO0922b9etaCh4eHF/NmA7DPPr4+38PDw8MbTdX3h+/s0D82NsPDw8O7wJutNL1ui8+uCLTxbpQu4+Hh4R3ibQZaeVSRLAq0BelNwIGHh4d3lNcuPCWBbDGaipvp/Gsqmmk8PDy8Q7xTo6x20HVqbauobHh4eHgLXv7mZLHgbHTbRhKPvxXw8PDwLvDaiCEf7bcFoy1meHh4eD/P2y9CbZrpUw16/YsBDw8Pb3veFn/w1C4BRO1vuYjQ7gng4eHh3eDVGwfx4H/Wsm++ODw8PLxP8WYh7Gx96lSpWM0A8fDw8Mo5Uduq5lFCgm9b8KIw4OHh4R3lte1sG79uBmObiAQPDw/vHq8dhs2Cg02paBvrxzvg4eHhXeadyjbyo/9e+46Hh4d3lndqtD8bjM3C3GKxAA8PD+8Cr40McmQe1M6uYd3Dw8PDO5+sDv9QL2/HkwFbu6wQhRF4eHh4F3ib7YP8vfVew2gkhoeHh/eTvORn/+sSkjfQ+wIT1To8PDy8C7y2bZ0d3Ju4dhYZ4+Hh4d3mzcKCJOptG+68vY7ehYeHh3eUNxs75asGm+WD2VDtzdIVHh4e3pq3qifliKuNcdtxWju6w8PDw9vw8mLQrlvlEW0bNCSlBQ8PD+8279ShP5tAnYoh3iwN4OHh4X2Ilx/xxfFdUov4Aw8PD++jvHb1Kg9nN0sMb5pyPDw8vGu82bG+WS09uzRQZMZ4eHh4P3LNgto8hsgP+k3LjoeHh7fm/QW1XbGGxhgxzwAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
